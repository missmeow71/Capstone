{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/missmeow/Documents/Capstone/personafi/pages/register.js\";\nimport React from \"react\";\nimport Router from 'next/router';\nimport { Header, Form, Input, Button, Segment } from 'semantic-ui-react';\nimport Layout from '../components/Layout';\nimport { register } from '../lib/moltin';\n\nvar Register =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Register, _React$Component);\n\n  function Register() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Register);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Register)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      name: '',\n      email: '',\n      password: '',\n      loading: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_handleSubmit\",\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var _this$state, name, email, password, _ref2, token;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                _this$state = _this.state, name = _this$state.name, email = _this$state.email, password = _this$state.password;\n\n                _this.setState({\n                  loading: true\n                });\n\n                _context.prev = 3;\n                _context.next = 6;\n                return register({\n                  name: name,\n                  email: email,\n                  password: password\n                });\n\n              case 6:\n                _ref2 = _context.sent;\n                token = _ref2.token;\n                localStorage.setItem('customerToken', token);\n                Router.push('/myaccount');\n                _context.next = 16;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](3);\n                console.log(_context.t0);\n\n                _this.setState({\n                  loading: false\n                });\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[3, 12]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"_handleChange\", function (_ref3) {\n      var _ref3$target = _ref3.target,\n          name = _ref3$target.name,\n          value = _ref3$target.value;\n      return _this.setState(_defineProperty({}, name, value));\n    });\n\n    return _this;\n  }\n\n  _createClass(Register, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var loading = this.state.loading;\n      return React.createElement(Layout, {\n        title: \"Register\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, React.createElement(Header, {\n        as: \"h1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, \"Create an account\"), React.createElement(Form, {\n        onSubmit: this._handleSubmit,\n        loading: loading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(Segment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, React.createElement(Form.Field, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, \"Name\"), React.createElement(Input, {\n        fluid: true,\n        name: \"name\",\n        autoFocus: true,\n        onChange: function onChange(e) {\n          return _this2._handleChange(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      })), React.createElement(Form.Field, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \"Email\"), React.createElement(Input, {\n        fluid: true,\n        name: \"email\",\n        type: \"email\",\n        onChange: function onChange(e) {\n          return _this2._handleChange(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      })), React.createElement(Form.Field, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \"Password\"), React.createElement(Input, {\n        fluid: true,\n        name: \"password\",\n        type: \"password\",\n        onChange: function onChange(e) {\n          return _this2._handleChange(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      })), React.createElement(Button, {\n        type: \"submit\",\n        color: \"orange\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"Register\"))));\n    }\n  }]);\n\n  return Register;\n}(React.Component);\n\nexport { Register as default };","map":{"version":3,"sources":["/Users/missmeow/Documents/Capstone/personafi/pages/register.js"],"names":["Router","Header","Form","Input","Button","Segment","Layout","register","Register","name","email","password","loading","e","preventDefault","state","setState","token","localStorage","setItem","push","console","log","target","value","_handleSubmit","_handleChange","React","Component"],"mappings":"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","sourcesContent":["import Router from 'next/router'\nimport {Header, Form, Input, Button, Segment} from 'semantic-ui-react'\nimport Layout from '../components/Layout'\nimport {register} from '../lib/moltin'\n\n\nexport default class Register extends React.Component {\n  state = {\n    name: '',\n    email: '',\n    password: '',\n    loading: false\n  }\n\n  _handleSubmit = async e => {\n    e.preventDefault()\n\n    const {name, email, password} = this.state\n\n    this.setState({\n      loading: true\n    })\n\n      try {\n        const {token} = await register({name, email, password})\n\n        localStorage.setItem('customerToken', token)\n\n        Router.push('/myaccount')\n      } catch (e) {\n        console.log(e);\n\n        this.setState({\n          loading: false\n        })\n      }\n    }\n\n  _handleChange = ({target: {name, value} }) =>\n    this.setState({\n      [name]: value\n    })\n\n  render () {\n    const {loading} = this.state\n\n    return (\n      <Layout title=\"Register\">\n        <Header as='h1'>Create an account</Header>\n\n        <Form onSubmit={this._handleSubmit} loading={loading}>\n          <Segment>\n            <Form.Field>\n              <label>Name</label>\n              <Input\n                fluid\n                name='name'\n                autoFocus\n                onChange={e => this._handleChange(e)}\n                />\n            </Form.Field>\n\n            <Form.Field>\n              <label>Email</label>\n              <Input\n                fluid\n                name='email'\n                type=\"email\"\n                onChange={e => this._handleChange(e)}\n                />\n            </Form.Field>\n\n            <Form.Field>\n              <label>Password</label>\n              <Input\n                fluid\n                name='password'\n                type='password'\n                onChange={e => this._handleChange(e)}\n                />\n            </Form.Field>\n            <Button type='submit' color='orange'>\n              Register\n            </Button>\n\n          </Segment>\n        </Form>\n      </Layout>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}