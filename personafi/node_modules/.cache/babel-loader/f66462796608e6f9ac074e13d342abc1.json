{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/missmeow/Documents/Capstone/personafi/pages/login.js\";\nimport React from \"react\";\nimport Router from 'next/router';\nimport { Header, Form, Input, Button, Segment } from 'semantic-ui-react';\nimport Layout from '../components/Layout';\nimport { login } from '../lib/moltin';\n\nvar Login =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Login, _React$Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      email: '',\n      password: '',\n      loading: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_handleSubmit\",\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var _this$state, email, password, _ref2, token;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                _this$state = _this.state, email = _this$state.email, password = _this$state.password;\n\n                _this.setState({\n                  loading: true\n                });\n\n                _context.prev = 3;\n                _context.next = 6;\n                return login({\n                  email: email,\n                  password: password\n                });\n\n              case 6:\n                _ref2 = _context.sent;\n                token = _ref2.token;\n                localStorage.setItem('customerToken', token);\n                Router.push('/myaccount');\n                _context.next = 16;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](3);\n                console.log(_context.t0);\n\n                _this.setState({\n                  loading: false\n                });\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[3, 12]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"_handleChange\", function (_ref3) {\n      var _ref3$target = _ref3.target,\n          name = _ref3$target.name,\n          value = _ref3$target.value;\n      return _this.setState(_defineProperty({}, name, value));\n    });\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var loading = this.state.loading;\n      return React.createElement(Layout, {\n        title: \"Login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, React.createElement(Header, {\n        as: \"h1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, \"Please log in to your account\"), React.createElement(Form, {\n        onSubmit: this._handleSubmit,\n        loading: loading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, React.createElement(Segment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(Form.Field, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, \"Email\"), React.createElement(Input, {\n        fluid: true,\n        name: \"email\",\n        type: \"email\",\n        autoFocus: true,\n        onChange: function onChange(e) {\n          return _this2._handleChange(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      })), React.createElement(Form.Field, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, \"Password\"), React.createElement(Input, {\n        fluid: true,\n        name: \"password\",\n        type: \"password\",\n        onChange: function onChange(e) {\n          return _this2._handleChange(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      })), React.createElement(Button, {\n        type: \"submit\",\n        color: \"orange\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, \"Login\"))));\n    }\n  }]);\n\n  return Login;\n}(React.Component);\n\nexport { Login as default };","map":{"version":3,"sources":["/Users/missmeow/Documents/Capstone/personafi/pages/login.js"],"names":["Router","Header","Form","Input","Button","Segment","Layout","login","Login","email","password","loading","e","preventDefault","state","setState","token","localStorage","setItem","push","console","log","target","name","value","_handleSubmit","_handleChange","React","Component"],"mappings":"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","sourcesContent":["import Router from 'next/router'\nimport {Header, Form, Input, Button, Segment} from 'semantic-ui-react'\nimport Layout from '../components/Layout'\nimport {login} from '../lib/moltin'\n\n\nexport default class Login extends React.Component {\n  state = {\n    email: '',\n    password: '',\n    loading: false\n  }\n\n  _handleSubmit = async e => {\n    e.preventDefault()\n\n    const {email, password} = this.state\n\n    this.setState({\n      loading: true\n    })\n\n      try {\n        const {token} = await login({email, password})\n\n        localStorage.setItem('customerToken', token)\n\n        Router.push('/myaccount')\n      } catch (e) {\n        console.log(e);\n\n        this.setState({\n          loading: false\n        })\n      }\n    }\n\n  _handleChange = ({target: {name, value} }) =>\n    this.setState({\n      [name]: value\n    })\n\n  render () {\n    const {loading} = this.state\n\n    return (\n      <Layout title=\"Login\">\n        <Header as='h1'>Please log in to your account</Header>\n\n        <Form onSubmit={this._handleSubmit} loading={loading}>\n          <Segment>\n\n            <Form.Field>\n              <label>Email</label>\n              <Input\n                fluid\n                name='email'\n                type=\"email\"\n                autoFocus\n                onChange={e => this._handleChange(e)}\n                />\n            </Form.Field>\n\n            <Form.Field>\n              <label>Password</label>\n              <Input\n                fluid\n                name='password'\n                type='password'\n                onChange={e => this._handleChange(e)}\n                />\n            </Form.Field>\n            <Button type='submit' color='orange'>\n              Login\n            </Button>\n\n          </Segment>\n        </Form>\n      </Layout>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}