{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from \"react\";\nimport Router from 'next/router';\nimport { Header, Form, Input, Button, Segment } from 'semantic-ui-react';\nimport Layout from '../components/Layout';\nimport { register } from '../lib/moltin';\n\nvar Register =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Register, _React$Component);\n\n  function Register() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Register);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Register)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      name: '',\n      email: '',\n      password: '',\n      loading: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_handleSubmit\",\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var _this$state, name, email, password, _ref2, token;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                _this$state = _this.state, name = _this$state.name, email = _this$state.email, password = _this$state.password;\n\n                _this.setState({\n                  loading: true\n                });\n\n                _context.prev = 3;\n                _context.next = 6;\n                return register({\n                  name: name,\n                  email: email,\n                  password: password\n                });\n\n              case 6:\n                _ref2 = _context.sent;\n                token = _ref2.token;\n                localStorage.setItem('customerToken', token);\n                Router.push('/myaccount');\n                _context.next = 16;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](3);\n                console.log(_context.t0);\n\n                _this.setState({\n                  loading: false\n                });\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[3, 12]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"_handleChange\", function (_ref3) {\n      var _ref3$target = _ref3.target,\n          name = _ref3$target.name,\n          value = _ref3$target.value;\n      return _this.setState(_defineProperty({}, name, value));\n    });\n\n    return _this;\n  }\n\n  _createClass(Register, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var loading = this.state.loading;\n      return React.createElement(Layout, {\n        title: \"Register\"\n      }, React.createElement(Header, {\n        as: \"h1\"\n      }, \"Create an account\"), React.createElement(Form, {\n        onSubmit: this._handleSubmit,\n        loading: loading\n      }, React.createElement(Segment, null, React.createElement(Form.Field, null, React.createElement(\"label\", null, \"Name\"), React.createElement(Input, {\n        fluid: true,\n        name: \"name\",\n        autoFocus: true,\n        onChange: function onChange(e) {\n          return _this2._handleChange(e);\n        }\n      })), React.createElement(Form.Field, null, React.createElement(\"label\", null, \"Email\"), React.createElement(Input, {\n        fluid: true,\n        name: \"email\",\n        type: \"email\",\n        onChange: function onChange(e) {\n          return _this2._handleChange(e);\n        }\n      })), React.createElement(Form.Field, null, React.createElement(\"label\", null, \"Password\"), React.createElement(Input, {\n        fluid: true,\n        name: \"password\",\n        type: \"password\",\n        onChange: function onChange(e) {\n          return _this2._handleChange(e);\n        }\n      })), React.createElement(Button, {\n        type: \"submit\",\n        color: \"orange\"\n      }, \"Register\"))));\n    }\n  }]);\n\n  return Register;\n}(React.Component);\n\nexport { Register as default };","map":null,"metadata":{},"sourceType":"module"}