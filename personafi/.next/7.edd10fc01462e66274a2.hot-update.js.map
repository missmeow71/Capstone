{"version":3,"file":"7.edd10fc01462e66274a2.hot-update.js","sources":["webpack:///lib/moltin.js","webpack:///pages/register.js"],"sourcesContent":["import { gateway as MoltinGateway } from '@moltin/sdk'\n\nconst Moltin = MoltinGateway({\n    client_id: 'TkrDPNqfC1j7AJFFUHnMZbN9RzPygkff3beqMhxQsl'\n})\n\nexport const getProducts = () => Moltin.Products.With('main_image').All()\n\nexport const getProductById = id => Moltin.Products.With('main_image').Get(id)\n\nexport const addToCart = (productId, quantity) => Moltin.Cart().AddProduct(productId, quantity)\n\nexport const getCartItems = id => Moltin.Cart(id).Items()\n\nexport const removeFromCart = (itemId, cartId) => Moltin.Cart(cartId).RemoveItem(itemId)\n\nexport const checkoutCart = (cartId, customer, billing) => Moltin.Cart(cartId).Checkout(customer, billing)\n\n// export const payForOrder = (orderId, token, email) => Moltin.Orders.Payment(orderId, {\n//   gateway: 'stripe',\n//   method: 'purchase',\n//   payment: token,\n//   options: {\n//     receipt_email: email\n//   }\n// })\n\nexport const register = async ({email, password, ...rest}) => {\n  const {\n    data: { name, id }\n  } = await Moltin.Customers.Create({\n    type: 'customer',\n    email,\n    password,\n    ...rest\n  })\n  const {token} = await login({email, password})\n\n  return {\n    id,\n    name,\n    email,\n    token\n  }\n}\n\nexport const login = async ({email, password}) => {\n  const {data: {token} } = await Moltin.Customers.Token(email, password)\n\n  return {\n    token\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// lib/moltin.js","import Router from 'next/router'\nimport {Header, Form, Input, Button, Segment} from 'semantic-ui-react'\nimport Layout from '../components/Layout'\nimport {register} from '../lib/moltin'\n\n\nexport default class Register extends React.Component {\n  state = {\n    name: '',\n    email: '',\n    password: '',\n    loading: false\n  }\n\n  _handleSubmit = async e => {\n    e.preventDefault()\n\n    const {name, email, password} = this.state\n\n    this.setState({\n      loading: true\n    })\n\n      try {\n        const {token} = await register({name, email, password})\n\n        localStorage.setItem('customerToken', token)\n\n        Router.push('/myaccount')\n      } catch (e) {\n        console.log(e);\n\n        this.setState({\n          loading: false\n        })\n      }\n    }\n\n  _handleChange = ({target: {name, value} }) =>\n    this.setState({\n      [name]: value\n    })\n\n  render () {\n    const {loading} = this.state\n\n    return (\n      <Layout title=\"Register\">\n        <Header as='h1'>Create an account</Header>\n\n        <Form onSubmit={this._handleSubmit} loading={loading}>\n          <Segment>\n            <Form.Field>\n              <label>Name</label>\n              <Input\n                fluid\n                name='name'\n                autoFocus\n                onChange={e => this._handleChange(e)}\n                />\n            </Form.Field>\n\n            <Form.Field>\n              <label>Email</label>\n              <Input\n                fluid\n                name='email'\n                type=\"email\"\n                onChange={e => this._handleChange(e)}\n                />\n            </Form.Field>\n\n            <Form.Field>\n              <label>Password</label>\n              <Input\n                fluid\n                name='password'\n                type='password'\n                onChange={e => this._handleChange(e)}\n                />\n            </Form.Field>\n            <Button type='submit' color='orange'>\n              Register\n            </Button>\n\n          </Segment>\n        </Form>\n      </Layout>\n    )\n  }\n}\n\n\n// WEBPACK FOOTER //\n// pages/register.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AADA;AAIA;AAAA;AAAA;AAEA;AAAA;AAAA;AAEA;AAAA;AAAA;AAEA;AAAA;AAAA;AAEA;AAAA;AAAA;AAEA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AAHA;AACA;AAJA;AAAA;AAAA;AAEA;AAAA;AAFA;AAAA;AASA;AAAA;AAAA;AACA;AAVA;AAAA;AASA;AATA;AAYA;AACA;AACA;AACA;AAJA;AACA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAmBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAIA;AADA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9CA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AAJA;;;;;;;;AAOA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AAIA;AACA;AADA;AACA;AANA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AACA;AAXA;AAAA;AAUA;AAEA;AAEA;AAdA;AAAA;AACA;AADA;AAAA;AAAA;AAgBA;AACA;AACA;AACA;AADA;AACA;AAnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;AAuBA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;AAKA;AAAA;AACA;AADA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAJA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAJA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAJA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;;;;AAnFA;AACA;AADA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}